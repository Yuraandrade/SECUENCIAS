; PIC16F887 Configuration Bit Settings

; Assembly source line config statements


#include p16f887.inc

; CONFIG1
; __config 0x28D5
 __CONFIG _CONFIG1, _FOSC_INTRC_CLKOUT & _WDTE_OFF & _PWRTE_OFF & _MCLRE_OFF & _CP_OFF & _CPD_OFF & _BOREN_OFF & _IESO_OFF & _FCMEN_ON & _LVP_OFF
; CONFIG2
; __config 0x3FFF
 __CONFIG _CONFIG2, _BOR4V_BOR40V & _WRT_OFF

    
    LIST p=16F887
    
N EQU 0xE0
C1 EQU 0x20 
C2 EQU 0x21 
C3 EQU 0x22
VAR0 EQU 0x23
VAR1 EQU 0x24
VAR2 EQU 0X25
VAR3 EQU 0x26
 

    ORG	0x00
    GOTO INICIO
    
INICIO
    BCF STATUS,RP1   ;RP0 = 0
    BSF STATUS,RP0  ;RP1 = 0
    MOVLW 0x71 
    MOVWF OSCCON
    MOVLW 0x10
    MOVWF TRISA
    CLRF TRISD
    BSF STATUS,RP1
    CLRF ANSEL
    BCF STATUS, RP0
    BCF STATUS,RP1
    
ARRANQUE
    
    BCF STATUS,C
    CLRF VAR3
    
    MOVLW 0x80
    MOVWF VAR0
    IORWF VAR3,1; OR
    MOVLW 0x20
    MOVWF VAR1
    IORWF VAR3,1;0R
    MOVLW 0X02
    MOVWF VAR2
    IORWF VAR3,0;OR
    MOVWF PORTD
    CALL RETARDO
    
PASAUNBIT
    
    RRF VAR0
    BTFSC VAR0,0
    goto PASOFINAL
    CLRF VAR3
    MOVFW VAR0
    IORWF VAR3,1
    RRF VAR1
    MOVFW VAR1
    IORWF VAR3,1
    RLF VAR2
    BCF VAR2,0
    MOVFW VAR2
    IORWF VAR3,0
    MOVWF VAR3
    MOVWF PORTD
    CALL RETARDO
    goto PASAUNBIT
    
PASOFINAL
    BCF STATUS,C
    CLRF VAR3
    MOVLW 0X01
    MOVWF VAR3
    MOVWF PORTD
    CALL RETARDO
    GOTO ARRANQUE
    
    
RETARDO 
    MOVLW N
    MOVWF C1
    
REP_1
    MOVLW N
    MOVWF C2
    
REP_2
    DECFSZ C2,1
    GOTO REP_2
    DECFSZ C1,1
    GOTO REP_1
    RETURN
    
    END